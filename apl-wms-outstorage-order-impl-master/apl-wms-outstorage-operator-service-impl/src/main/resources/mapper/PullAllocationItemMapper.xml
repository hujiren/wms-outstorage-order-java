<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.apl.wms.outstorage.operator.mapper.PullAllocationItemMapper">


    <!-- 查找详情 2020-06-09-->
    <select id="listPullItemByBatchId" resultType="com.apl.wms.outstorage.operator.pojo.vo.PullAllocationItemInfoVo">
        SELECT
          id, 
          batch_id, 
          out_order_id, 
          commodity_id, 
          storage_local_id,
          allocation_qty
        FROM
          pull_allocation_item
        where
          batch_id = #{batchId}
    </select>

    <!-- 查找详情 2020-06-09-->
    <select id="getById" resultType="com.apl.wms.outstorage.operator.pojo.vo.PullAllocationItemInfoVo">
        SELECT
          id,
          batch_id,
          out_order_id,
          commodity_id,
          storage_local_id,
          allocation_qty
        FROM
          pull_allocation_item
        where
          id = #{id}
    </select>

    <!-- 查找列表 2020-06-09-->
    <select id="getList" resultType="com.apl.wms.outstorage.operator.pojo.vo.PullAllocationItemListVo">
        SELECT
           id, 
           batch_id, 
           out_order_id, 
           commodity_id, 
           storage_local_id,
           allocation_qty
        FROM
           pull_allocation_item
        where
        1 = 1
        order by id desc
    </select>

    <insert id="insertPullAllocationItem" parameterType="java.util.List">

        <foreach collection="list" separator="," item="com.apl.wms.outstorage.operator.pojo.po.PullAllocationItemPo" open="" close="" index="">
            insert into pull_allocation_item(out_order_id, commodity_id, storage_local_id, allocation_qty)
            values(#{list.outOrderId}, #{list.commodityId}, #{list.storageLocalId}, #{allocationQty})
        </foreach>

    </insert>
</mapper>
